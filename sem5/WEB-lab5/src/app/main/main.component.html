<div id="basic" class="container-fluid">
  <div id="header" class="row bright">
    <div class="col-2 my-auto">
      <button type="button" class="in-button" (click)="!!href ? on_back() : on_login()">{{ leftHeaderButton }}</button>
    </div>
    <div class="col-8">
      <h6 id="title">–ë–∏—Ä–∂–∞</h6>
    </div>
    <div class="col-2 my-auto">
      <button *ngIf="href === '' && user.member()" type="button" class="in-button" data-toggle="modal" data-target="#user_edit">{{ rightHeaderButton }}</button>
      <button *ngIf="href === 'actions' && user.admin()" type="button" class="in-button" data-toggle="modal" data-target="#add_action">{{ rightHeaderButton }}</button>
    </div>
  </div>

  <ng-template #mainBody>
    <div class="modal fade" id="user_edit" tabindex="-1" role="dialog" aria-labelledby="user_title" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="user_title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <input type="number" class="form-control" id="user_money" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ä–µ–¥—Å—Ç–≤" name="user_money" [(ngModel)]="user.money"/>
                <label for="user_money">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ä–µ–¥—Å—Ç–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
                <div class="invalid-feedback">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!</div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
            <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="on_edit_user()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="on_delete_user()">–£–¥–∞–ª–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </div>
    <div class="big-body row bright">
      <form *ngIf="user.admin()" class="col-4 my-auto offset-4">
        <div class="form-group">
          <input type="datetime-local" class="form-control" id="settings_start" placeholder="–ù–∞—á–∞–ª–æ —Ç–æ—Ä–≥–æ–≤" name="settings_start" [(ngModel)]="settings.tradeStart"/>
          <label for="settings_start">–ù–∞—á–∞–ª–æ —Ç–æ—Ä–≥–æ–≤</label>
          <div class="invalid-feedback">–ö–ù–∞—á–∞–ª–æ —Ç–æ—Ä–≥–æ–≤ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!</div>
        </div>
        <div class="form-group">
          <input type="datetime-local" class="form-control" id="settings_end" placeholder="–ö–æ–Ω–µ—Ü —Ç–æ—Ä–≥–æ–≤" name="settings_end" [(ngModel)]="settings.tradeEnd"/>
          <label for="settings_end">–ö–æ–Ω–µ—Ü —Ç–æ—Ä–≥–æ–≤</label>
          <div class="invalid-feedback">–ö–æ–Ω–µ—Ü —Ç–æ—Ä–≥–æ–≤ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!</div>
        </div>
        <div class="form-group">
          <input type="number" class="form-control" id="settings_interval" placeholder="–ò–Ω—Ç–µ—Ä–≤–∞–ª (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)" name="settings_interval" [(ngModel)]="settings.interval"/>
          <label for="settings_interval">–ò–Ω—Ç–µ—Ä–≤–∞–ª (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)</label>
          <div class="invalid-feedback">–ò–Ω—Ç–µ—Ä–≤–∞–ª (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö) –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!</div>
        </div>
        <div class="form-group">
          <button type="button" class="in-button stand-button" id="settings_save" (click)="set_settings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
      </form>
    </div>
    <div class="small-body row">
      <div class="col-4 my-auto">
        <button type="button" class="in-button" (click)="on_brokers()">ü†î –ö –±—Ä–æ–∫–µ—Ä–∞–º</button>
      </div>
      <div class="col-4 offset-4 my-auto">
        <button type="button" class="in-button" (click)="on_actions()">–ö –∞–∫—Ü–∏—è–º ü†ñ</button>
      </div>
    </div>
  </ng-template>

  <ng-template #brokersBody>
    <div class="body row">
      <div class="col">
        <app-brokers *ngFor="let broker of brokers" [current]="broker"></app-brokers>
      </div>
    </div>
  </ng-template>

  <ng-template #actionsBody>
    <div class="modal fade" id="add_action" tabindex="-1" role="dialog" aria-labelledby="add_action_title" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="add_action_title">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–∫—Ü–∏–∏</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <form>
              <div class="form-group">
                <input type="text" class="form-control" id="add_action_name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" name="add_action_name" [(ngModel)]="newAction.name"/>
                <label for="add_action_name">–ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫—Ü–∏–∏</label>
                <div class="invalid-feedback">–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!</div>
              </div>
              <div class="form-group">
                <input type="number" class="form-control" id="add_action_max" placeholder="–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ" name="add_action_max" [(ngModel)]="newAction.maximum"/>
                <label for="add_action_max">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</label>
                <div class="invalid-feedback">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!</div>
              </div>
              <div class="form-group">
                <input type="number" class="form-control" id="add_actions_quant" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ" name="add_actions_quant" [(ngModel)]="newAction.quantity"/>
                <label for="add_actions_quant">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∞–∫—Ü–∏–π</label>
                <div class="invalid-feedback">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º!</div>
              </div>
              <div class="form-group">
                <input type="number" class="form-control" id="add_action_cost" placeholder="–ù–∞—á–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞" name="add_action_cost" [(ngModel)]="newAction.cost"/>
                <label for="add_action_cost">–ù–∞—á–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –∞–∫—Ü–∏–∏</label>
                <div class="invalid-feedback">–ù–∞—á–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π!</div>
              </div>
              <div class="form-group">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="add_equal" id="add_equal" [(ngModel)]="newAction.law" value="equal">
                  <label class="form-check-label" for="add_equal">–†–∞–≤–Ω–æ–º–µ—Ä–Ω—ã–π –∑–∞–∫–æ–Ω —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="add_normal" id="add_normal" [(ngModel)]="newAction.law" value="normal">
                  <label class="form-check-label" for="add_normal">–ù–æ—Ä–º–∞–ª—å–Ω—ã–π –∑–∞–∫–æ–Ω —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è</label>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
            <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="on_add_action()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </div>
    <div class="body row">
      <div class="col">
        <app-actions *ngFor="let action of actions" [current]="action"></app-actions>
      </div>
    </div>
  </ng-template>

  <ng-container *ngTemplateOutlet="!!href ? (href === 'brokers' ? brokersBody : actionsBody ) : mainBody"></ng-container>
</div>
